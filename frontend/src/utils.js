export const TEAM_MAP = {
    'crd': { name: 'Arizona Cardinals', city: 'Arizona', name_short: 'Cardinals' },
    'atl': { name: 'Atlanta Falcons', city: 'Atlanta', name_short: 'Falcons' },
    'rav': { name: 'Baltimore Ravens', city: 'Baltimore', name_short: 'Ravens' },
    'buf': { name: 'Buffalo Bills', city: 'Buffalo', name_short: 'Bills' },
    'car': { name: 'Carolina Panthers', city: 'Carolina', name_short: 'Panthers' },
    'chi': { name: 'Chicago Bears', city: 'Chicago', name_short: 'Bears' },
    'cin': { name: 'Cincinnati Bengals', city: 'Cincinnati', name_short: 'Bengals' },
    'cle': { name: 'Cleveland Browns', city: 'Cleveland', name_short: 'Browns' },
    'dal': { name: 'Dallas Cowboys', city: 'Dallas', name_short: 'Cowboys' },
    'den': { name: 'Denver Broncos', city: 'Denver', name_short: 'Broncos' },
    'det': { name: 'Detroit Lions', city: 'Detroit', name_short: 'Lions' },
    'gnb': { name: 'Green Bay Packers', city: 'Green Bay', name_short: 'Packers' },
    'htx': { name: 'Houston Texans', city: 'Houston', name_short: 'Texans' },
    'clt': { name: 'Indianapolis Colts', city: 'Indianapolis', name_short: 'Colts' },
    'jax': { name: 'Jacksonville Jaguars', city: 'Jacksonville', name_short: 'Jaguars' },
    'kan': { name: 'Kansas City Chiefs', city: 'Kansas City', name_short: 'Chiefs' },
    'sdg': { name: 'Los Angeles Chargers', city: 'Los Angeles', name_short: 'Chargers' },
    'ram': { name: 'Los Angeles Rams', city: 'Los Angeles', name_short: 'Rams' },
    'rai': { name: 'Las Vegas Raiders', city: 'Las Vegas', name_short: 'Raiders' },
    'mia': { name: 'Miami Dolphins', city: 'Miami', name_short: 'Dolphins' },
    'min': { name: 'Minnesota Vikings', city: 'Minnesota', name_short: 'Vikings' },
    'nwe': { name: 'New England Patriots', city: 'New England', name_short: 'Patriots' },
    'nor': { name: 'New Orleans Saints', city: 'New Orleans', name_short: 'Saints' },
    'nyg': { name: 'New York Giants', city: 'New York', name_short: 'Giants' },
    'nyj': { name: 'New York Jets', city: 'New York', name_short: 'Jets' },
    'phi': { name: 'Philadelphia Eagles', city: 'Philadelphia', name_short: 'Eagles' },
    'pit': { name: 'Pittsburgh Steelers', city: 'Pittsburgh', name_short: 'Steelers' },
    'sea': { name: 'Seattle Seahawks', city: 'Seattle', name_short: 'Seahawks' },
    'sfo': { name: 'San Francisco 49ers', city: 'San Francisco', name_short: '49ers' },
    'tam': { name: 'Tampa Bay Buccaneers', city: 'Tampa Bay', name_short: 'Buccaneers' },
    'oti': { name: 'Tennessee Titans', city: 'Tennessee', name_short: 'Titans' },
    'was': { name: 'Washington Commanders', city: 'Washington', name_short: 'Commanders' }
};

export const TEAM_COLORS = {
    'crd': { 
        primary: '#97233F', 
        secondary: '#FFB612', 
        neon: '#FF1A5C',
        secondaryNeon: '#FFD700'
    },
    'atl': { 
        primary: '#A71930', 
        secondary: '#000000', 
        neon: '#FF2D4A',
        secondaryNeon: '#FFFFFF'
    },
    'rav': { 
        primary: '#241773', 
        secondary: '#000000', 
        neon: '#4A2CFF',
        secondaryNeon: '#FFFFFF'
    },
    'buf': { 
        primary: '#00338D', 
        secondary: '#C60C30', 
        neon: '#0066FF',
        secondaryNeon: '#FF3333'
    },
    'car': { 
        primary: '#0085CA', 
        secondary: '#101820', 
        neon: '#00BFFF',
        secondaryNeon: '#FFFFFF'
    },
    'chi': { 
        primary: '#C83803', 
        secondary: '#C83803', 
        neon: '#FF6600',
        secondaryNeon: '#FF6600'
    },
    'cin': { 
        primary: '#FB4F14', 
        secondary: '#000000', 
        neon: '#FF6600',
        secondaryNeon: '#FFFFFF'
    },
    'cle': { 
        primary: '#311D00', 
        secondary: '#FF3C00', 
        neon: '#FF8C00',
        secondaryNeon: '#FF6600'
    },
    'dal': { 
        primary: '#003594', 
        secondary: '#869397', 
        neon: '#0066FF',
        secondaryNeon: '#CCCCCC'
    },
    'den': { 
        primary: '#FB4F14', 
        secondary: '#002244', 
        neon: '#FF6600',
        secondaryNeon: '#0066FF'
    },
    'det': { 
        primary: '#0076B6', 
        secondary: '#B0B7BC', 
        neon: '#00BFFF',
        secondaryNeon: '#E0E0E0'
    },
    'gnb': { 
        primary: '#203731', 
        secondary: '#FFB612', 
        neon: '#00FF7F',
        secondaryNeon: '#FFD700'
    },
    'htx': { 
        primary: '#03202F', 
        secondary: '#A71930', 
        neon: '#0066CC',
        secondaryNeon: '#FF3333'
    },
    'clt': { 
        primary: '#002C5F', 
        secondary: '#A5ACAF', 
        neon: '#0066FF',
        secondaryNeon: '#D0D0D0'
    },
    'jax': { 
        primary: '#006778', 
        secondary: '#9F2C55', 
        neon: '#00CCCC',
        secondaryNeon: '#FF66AA'
    },
    'kan': { 
        primary: '#E31837', 
        secondary: '#FFB81C', 
        neon: '#FF1A5C',
        secondaryNeon: '#FFD700'
    },
    'sdg': { 
        primary: '#0080C6', 
        secondary: '#FFC20E', 
        neon: '#00BFFF',
        secondaryNeon: '#FFD700'
    },
    'ram': { 
        primary: '#003594', 
        secondary: '#FFA300', 
        neon: '#0066FF',
        secondaryNeon: '#FFD700'
    },
    'rai': { 
        primary: '#000000', 
        secondary: '#C4C4C4', 
        neon: '#FFFFFF',
        secondaryNeon: '#FFFFFF'
    },
    'mia': { 
        primary: '#008E97', 
        secondary: '#FC4C02', 
        neon: '#00FFBF',
        secondaryNeon: '#FF6600'
    },
    'min': { 
        primary: '#4F2683', 
        secondary: '#FFC62F', 
        neon: '#BF00FF',
        secondaryNeon: '#FFD700'
    },
    'nwe': { 
        primary: '#002244', 
        secondary: '#C60C30', 
        neon: '#00BFFF',
        secondaryNeon: '#FF3333'
    },
    'nor': { 
        primary: '#D3BC8D', 
        secondary: '#101820', 
        neon: '#F0D090',
        secondaryNeon: '#FFFFFF'
    },
    'nyg': { 
        primary: '#0B2265', 
        secondary: '#A71930', 
        neon: '#0066FF',
        secondaryNeon: '#FF3333'
    },
    'nyj': { 
        primary: '#0C371D', 
        secondary: '#FFFFFF', 
        neon: '#00FF7F',
        secondaryNeon: '#FFFFFF'
    },
    'phi': { 
        primary: '#004C54', 
        secondary: '#A5ACAF', 
        neon: '#00FFBF', secondaryNeon: '#D0D0D0'
    },
    'pit': { 
        primary: '#000000', 
        secondary: '#FFB612', 
        neon: '#FFFFFF',
        secondaryNeon: '#FFD700'
    },
    'sea': { 
        primary: '#002244', 
        secondary: '#69BE28', 
        neon: '#0080CC',
        secondaryNeon: '#00FF00'
    },
    'sfo': { 
        primary: '#AA0000', 
        secondary: '#B3995D', 
        neon: '#FF0000',
        secondaryNeon: '#FFD700'
    },
    'tam': { 
        primary: '#D50A0A', 
        secondary: '#FF7900', 
        neon: '#FF3333',
        secondaryNeon: '#FF9900'
    },
    'oti': { 
        primary: '#0C2340', 
        secondary: '#4B92DB', 
        neon: '#00BFFF',
        secondaryNeon: '#66B3FF'
    },
    'was': { 
        primary: '#5A1414', 
        secondary: '#FFB612', 
        neon: '#FF6666',
        secondaryNeon: '#FFD700'
    }
};

// Get team primary color
export function getTeamPrimaryColor(teamId) {
  return TEAM_COLORS[teamId]?.primary || '#dc2626';
}

// Get team neon color - bright, vibrant version of primary color
export function getNeonTeamColor(teamId) {
  return TEAM_COLORS[teamId]?.neon || '#FF1A5C';
}

// Calculate team ranking for a specific stat
export function calculateTeamRanking(teams, teamId, statField, sortDirection = 'desc') {
  if (!teams || teams.length === 0) return null;
  
  // Sort teams by the specified stat
  const sortedTeams = [...teams].sort((a, b) => {
    const aValue = a[statField] || 0;
    const bValue = b[statField] || 0;
    
    if (sortDirection === 'desc') {
      return bValue - aValue; // Higher values first
    } else {
      return aValue - bValue; // Lower values first
    }
  });
  
  // Find the rank of the specified team
  const rank = sortedTeams.findIndex(team => team.teamId === teamId) + 1;
  return rank;
}

// Format ranking with ordinal suffix
export function formatRanking(rank) {
  if (!rank) return 'N/A';
  
  const lastDigit = rank % 10;
  const lastTwoDigits = rank % 100;
  
  if (lastTwoDigits >= 11 && lastTwoDigits <= 13) {
    return `${rank}th`;
  }
  
  switch (lastDigit) {
    case 1: return `${rank}st`;
    case 2: return `${rank}nd`;
    case 3: return `${rank}rd`;
    default: return `${rank}th`;
  }
}

// Get stat value with proper formatting
export function getStatValue(team, statField, format = 'number') {
  const value = team[statField];
  
  if (value === null || value === undefined) return 'N/A';
  
  switch (format) {
    case 'percentage':
      return `${value}%`;
    case 'time':
      return value; // Already formatted as MM:SS
    case 'yards':
      return `${value} YPG`;
    case 'points':
      return `${value} PPG`;
    default:
      return value;
  }
}

export function getTeamSecondaryColor(teamId) {
  return TEAM_COLORS[teamId]?.secondary || '#ffffff';
}

// Get team secondary neon color - bright, vibrant version of secondary color
export function getTeamSecondaryNeonColor(teamId) {
  return TEAM_COLORS[teamId]?.secondaryNeon || '#ffffff';
}

// Get two contrasting colors for two teams
export function getTeamColorsForGame(homeTeamId, awayTeamId) {
  const homeTeamPrimary = TEAM_COLORS[homeTeamId]?.primary || '#dc2626';
  const awayTeamPrimary = TEAM_COLORS[awayTeamId]?.primary || '#dc2626';
  
  // Simple conditional logic for known similar color combinations
  // Home team always keeps primary color, away team switches to secondary if needed
  
  // Check if away team has a similar color to home team
  if (homeTeamId === 'crd' && ['atl', 'kan', 'sfo', 'tam', 'was'].includes(awayTeamId)) {
    // Cardinals vs other dark red teams
    return {
      homeTeamColor: homeTeamPrimary, // Cardinals keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Other team uses secondary
    };
  }
  
  if (homeTeamId === 'atl' && ['crd', 'kan', 'sfo', 'tam', 'was'].includes(awayTeamId)) {
    // Falcons vs other dark red teams
    return {
      homeTeamColor: homeTeamPrimary, // Falcons keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Other team uses secondary
    };
  }
  
  if (homeTeamId === 'kan' && ['crd', 'atl', 'sfo', 'tam', 'was'].includes(awayTeamId)) {
    // Chiefs vs other dark red teams
    return {
      homeTeamColor: homeTeamPrimary, // Chiefs keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Other team uses secondary
    };
  }
  
  if (homeTeamId === 'sfo' && ['crd', 'atl', 'kan', 'tam', 'was'].includes(awayTeamId)) {
    // 49ers vs other dark red teams
    return {
      homeTeamColor: homeTeamPrimary, // 49ers keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Other team uses secondary
    };
  }
  
  if (homeTeamId === 'tam' && ['crd', 'atl', 'kan', 'sfo', 'was'].includes(awayTeamId)) {
    // Buccaneers vs other dark red teams
    return {
      homeTeamColor: homeTeamPrimary, // Buccaneers keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Other team uses secondary
    };
  }
  
  if (homeTeamId === 'was' && ['crd', 'atl', 'kan', 'sfo', 'tam'].includes(awayTeamId)) {
    // Commanders vs other dark red teams
    return {
      homeTeamColor: homeTeamPrimary, // Commanders keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Other team uses secondary
    };
  }
  
  // Blue teams
  if (homeTeamId === 'buf' && ['dal', 'ram', 'clt', 'nwe', 'sea', 'oti'].includes(awayTeamId)) {
    // Bills vs other blue teams
    return {
      homeTeamColor: homeTeamPrimary, // Bills keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Other team uses secondary
    };
  }
  
  if (homeTeamId === 'dal' && ['buf', 'ram', 'clt', 'nwe', 'sea', 'oti'].includes(awayTeamId)) {
    // Cowboys vs other blue teams
    return {
      homeTeamColor: homeTeamPrimary, // Cowboys keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Other team uses secondary
    };
  }
  
  if (homeTeamId === 'ram' && ['buf', 'dal', 'clt', 'nwe', 'sea', 'oti'].includes(awayTeamId)) {
    // Rams vs other blue teams
    return {
      homeTeamColor: homeTeamPrimary, // Rams keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Other team uses secondary
    };
  }
  
  if (homeTeamId === 'clt' && ['buf', 'dal', 'ram', 'nwe', 'sea', 'oti'].includes(awayTeamId)) {
    // Colts vs other blue teams
    return {
      homeTeamColor: homeTeamPrimary, // Colts keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Other team uses secondary
    };
  }
  
  if (homeTeamId === 'nwe' && ['buf', 'dal', 'ram', 'clt', 'sea', 'oti'].includes(awayTeamId)) {
    // Patriots vs other blue teams
    return {
      homeTeamColor: homeTeamPrimary, // Patriots keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Other team uses secondary
    };
  }
  
  if (homeTeamId === 'sea' && ['buf', 'dal', 'ram', 'clt', 'nwe', 'oti'].includes(awayTeamId)) {
    // Seahawks vs other blue teams
    return {
      homeTeamColor: homeTeamPrimary, // Seahawks keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Other team uses secondary
    };
  }
  
  if (homeTeamId === 'oti' && ['buf', 'dal', 'ram', 'clt', 'nwe', 'sea'].includes(awayTeamId)) {
    // Titans vs other blue teams
    return {
      homeTeamColor: homeTeamPrimary, // Titans keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Other team uses secondary
    };
  }
  
  // Orange teams
  if (homeTeamId === 'chi' && ['cin', 'cle', 'den'].includes(awayTeamId)) {
    // Bears vs other orange teams
    return {
      homeTeamColor: homeTeamPrimary, // Bears keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Other team uses secondary
    };
  }
  
  if (homeTeamId === 'cin' && ['chi', 'cle', 'den'].includes(awayTeamId)) {
    // Bengals vs other orange teams
    return {
      homeTeamColor: homeTeamPrimary, // Bengals keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Other team uses secondary
    };
  }
  
  if (homeTeamId === 'cle' && ['chi', 'cin', 'den'].includes(awayTeamId)) {
    // Browns vs other orange teams
    return {
      homeTeamColor: homeTeamPrimary, // Browns keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Other team uses secondary
    };
  }
  
  if (homeTeamId === 'den' && ['chi', 'cin', 'cle'].includes(awayTeamId)) {
    // Broncos vs other orange teams
    return {
      homeTeamColor: homeTeamPrimary, // Broncos keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Other team uses secondary
    };
  }

  // Black teams
  if (homeTeamId === 'rai' && awayTeamId === 'pit') {
    // Raiders vs Steelers
    return {
      homeTeamColor: homeTeamPrimary, // Raiders keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Steelers use gold
    };
  }
  
  if (homeTeamId === 'pit' && awayTeamId === 'rai') {
    // Steelers vs Raiders
    return {
      homeTeamColor: homeTeamPrimary, // Steelers keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Raiders use silver
    };
  }
  
  // Dark blue/teal teams
  if (homeTeamId === 'htx' && awayTeamId === 'jax') {
    // Texans vs Jaguars
    return {
      homeTeamColor: homeTeamPrimary, // Texans keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Jaguars use teal
    };
  }
  
  if (homeTeamId === 'jax' && awayTeamId === 'htx') {
    // Jaguars vs Texans
    return {
      homeTeamColor: homeTeamPrimary, // Jaguars keep primary
      awayTeamColor: TEAM_COLORS[awayTeamId]?.secondary || '#ffffff' // Texans use red
    };
  }
  
  // Default: both teams use primary colors
  return {
    homeTeamColor: homeTeamPrimary,
    awayTeamColor: awayTeamPrimary
  };
}


// Format numbers for display
export function formatNumber(num) {
  if (num === null || num === undefined) return '0';
  return num.toLocaleString();
}